function Validator(t){const e=document.querySelector(t),n=e.querySelectorAll("[rule]"),i=[...e.querySelectorAll("input")];let r="",a="";const o={},u={required:t=>t.trim()?void 0:"Vui lòng nhập trường này",email(t){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t.trim())?void 0:"Địa chỉ email không hợp lệ!"},min:t=>e=>e.length>=t?void 0:`Vui lòng nhập hơn ${t} ký tự`,formatDate(t){if(0!==t.length)return/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/.test(t.trim())?void 0:"Vui lòng nhập theo dạng DD/MM/YYYY"},uniqueEmail:t=>(JSON.parse(localStorage.getItem("user-ttthh-key"))?.map((t=>t.email))??[]).includes(t)?"Email đã được sử dụng":void 0,uniqueSubmitCode(t){if(6!==t.length)return"Phải đúng 6 kí tự!";return/^[a-zA-Z0-9]{6}$/.test(t)?""===t||t!==a?"Mã xác thực không đúng!":void 0:"Không được có ký tự đặc biệt hay dấu cách"},beforeDayNow(t){if(""!==t)return new Date(t.split("/").reverse().join("-"))<new Date?void 0:"Ngày sinh phải bé hơn ngày hiện tại"},firstName:t=>/^[A-ZẮẰẲẴẶĂẤẦẨẪẬÂÁÀÃẢẠĐẾỀỂỄỆÊÉÈẺẼẸÍÌỈĨỊỐỒỔỖỘÔỚỜỞỠỢƠÓÒÕỎỌỨỪỬỮỰƯÚÙỦŨỤÝỲỶỸỴ][a-zắằẳẵặăấầẩẫậâáàãảạđếềểễệêéèẻẽẹíìỉĩịốồổỗộôớờởỡợơóòõỏọứừửữựưúùủũụýỳỷỹỵ]*( [A-ZẮẰẲẴẶĂẤẦẨẪẬÂÁÀÃẢẠĐẾỀỂỄỆÊÉÈẺẼẸÍÌỈĨỊỐỒỔỖỘÔỚỜỞỠỢƠÓÒÕỎỌỨỪỬỮỰƯÚÙỦŨỤÝỲỶỸỴ][a-zắằẳẵặăấầẩẫậâáàãảạđếềểễệêéèẻẽẹíìỉĩịốồổỗộôớờởỡợơóòõỏọứừửữựưúùủũụýỳỷỹỵ]*)*$/.test(t.trim())?void 0:"Họ đệm phải bắt đầu bằng ký tư hoa",lastName:t=>/^[A-ZẮẰẲẴẶĂẤẦẨẪẬÂÁÀÃẢẠĐẾỀỂỄỆÊÉÈẺẼẸÍÌỈĨỊỐỒỔỖỘÔỚỜỞỠỢƠÓÒÕỎỌỨỪỬỮỰƯÚÙỦŨỤÝỲỶỸỴ][a-zắằẳẵặăấầẩẫậâáàãảạđếềểễệêéèẻẽẹíìỉĩịốồổỗộôớờởỡợơóòõỏọứừửữựưúùủũụýỳỷỹỵ]*$/.test(t.trim())?void 0:"Tên phải bắt đầu bằng ký tư hoa"};function l(t,e){for(t=t.parentElement;t;){if(t.matches(e))return t;t=t.parentElement}}function s(t){var e;return o[t.name].find((n=>e=n(t.value))),e}function c(t){t.classList.remove("invalid"),t.querySelector(".form-messenger").innerHTML=""}function m(t,e){var n=l(t,".form-group");return e?function(t,e){t.classList.add("invalid"),t.querySelector(".form-messenger").innerHTML='<span><i class="fas fa-times"></i></span>'+e}(n,e):c(n),!e}e&&(n.forEach((t=>{t.getAttribute("rule").split("|").forEach((e=>{var n;if(e.includes(":")){var i=e.split(":");n=u[i[0]](Number(i[1]))}else n=u[e];o[t.name]?o[t.name].push(n):o[t.name]=[n]})),t.onblur=()=>m(t,s(t)),t.oninput=()=>c(l(t,".form-group"))})),e.onsubmit=t=>{t.preventDefault();var r=!0;if(n.forEach((t=>{m(t,s(t))||(r=!1)})),r){var a=i.reduce(((t,e)=>"radio"!==e.type||e.checked?(t[e.name]=e.value.trim(),t):t),{});this.onSubmit?this.onSubmit(a):e.submit()}});const h=$(".form-group__item__text.get-code");h&&h.click((()=>{if(m($("input#email-id")[0],s($("input#email-id")[0]))){const t=$("input#email-id")[0].value;console.log(t),""===a||r!==t?(r=t,a=Math.random().toString(36).substring(2,8),Email.sendEmail(t,"HTTTH Shop, Xác thực tài khoản!","Mã xác thực tài khoản của bạn là : "+a).then((()=>toast({title:"Thành công!",message:"Đã gửi mã xác thực đến email của bạn.",type:"success",duration:5e3})))):toast({title:"Thành công!",message:"Đã gửi mã xác thực đến email của bạn.",type:"success",duration:5e3})}}))}