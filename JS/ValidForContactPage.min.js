const elemSelectSevices=document.querySelector("#id-select-option"),elemEmail=document.querySelector("#email-address-id"),elemFileName=document.querySelector("#output-file-path"),elemFileChose=document.querySelector("#choose-file"),elemMSG=document.querySelector("#message-input"),elemSubmit=document.querySelector("#submit-btn_id");function start(){elemEmail.addEventListener("keyup",(()=>{validEmail(elemEmail,getParentElem(elemEmail,"form-group"),/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,"Định dạng gmail không hợp lệ")})),elemFileChose.addEventListener("change",(()=>{validFile(elemFileChose,getParentElem(elemFileChose,"form-group"),/([a-zA-Z0-9\s_\\.\-\(\):])+(.doc|.docx|.pdf)$/,"Định dạng file phải là .doc, .docx., .pdf")})),elemSubmit.addEventListener("click",(e=>{e.preventDefault();let l=validEmail(elemEmail,getParentElem(elemEmail,"form-group"),/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,"Định dạng gmail không hợp lệ"),t=validFile(elemFileChose,getParentElem(elemFileChose,"form-group"),/([a-zA-Z0-9\s_\\.\-\(\):])+(.doc|.docx|.pdf)$/,"Định dạng file phải là .doc, .docx., .pdf");if(l&&t){let e=elemSelectSevices.value,l=elemEmail.value,t=elemMSG.value,n=$("#choose-file")[0].files[0],i=new FileReader;i.readAsBinaryString(n),i.onload=function(){let a="data:"+n.type+";base64,"+btoa(i.result),m=`Sending file: ${n.name} .Message: ${t}`;Email.send({SecureToken:"1513ef06-d5e0-4952-81bf-2e2dec982a95",To:l,From:"hieurio12@gmail.com",Subject:e,Body:m,Attachments:[{name:n.name,data:a}]}).then((e=>toast({title:"Thành công!",message:"Gửi thành công.",type:"success",duration:5e3})))}}}))}function getParentElem(e,l){for(;!e.classList.contains(l);)e=e.parentElement;return e}function validEmail(e,l,t,n){let i=l.querySelector(".msg-error");return""==e.value?(i.innerHTML="Không được để trống!",!1):t.test(e.value)?(i.innerHTML="(*)",!0):(i.innerHTML=n,!1)}function validFile(e,l,t,n){let i=l.querySelector(".msg-error");return""==elemFileName.value?(i.innerHTML="Không được để trống!",!1):t.test(elemFileName.value)?(i.innerHTML="(*)",!0):(i.innerHTML=n,!1)}start();