const backToTopBtn = $(".back-to-top"),
  app = $(".app"),
  navbarBtn = $(".header__navbar__menu-btn"),
  navbarElement = $(".header__navbar__container"),
  navbarModal = $(".header__navbar__modal"),
  navbarModalOverlay = $(".modal__overlay"),
  closeNavbarBtn = $(".header__navbar__close-menu"),
  submenuBtn = $(".header__navbar__link__icon-mobile"),
  headerNavbarItems = $(".header__navbar__item"),
  headerNavbarContainer = $(".header__navbar__container"),
  submenuFooterBtn = $(".footer__navbar__title"),
  listMenuHeader = Array.from(
    document.querySelectorAll(".header__user-menu__item")
  ),
  elementsUserMenuOptionsList = Array.from(
    $(".header__user-menu__item__options__item")
  );
let isGitHub = window.location.href.includes("WebSite_BanGiay_T3H2");
window.addEventListener("scroll", () => {
  (window.scrollY || document.documentElement.scrollTop) >= 150
    ? backToTopBtn.fadeIn(400, "linear")
    : backToTopBtn.fadeOut(400, "linear");
}),
  backToTopBtn.click(() => {
    document.documentElement.scrollTop = 0;
  }),
  (() => {
    function e(e) {
      navbarElement.toggleClass("open"),
        navbarModal.toggleClass("open"),
        app.toggleClass("open-menu"),
        navbarModalOverlay.toggleClass("open"),
        e.stopPropagation();
    }
    navbarBtn.click(e), closeNavbarBtn.click(e), navbarModal.click(e);
  })(),
  (() => {
    let e;
    (jQuery.fn.animateAuto = function (e, a, n = "linear") {
      var t, r;
      return (
        this.each(function (e, n) {
          (n = jQuery(n)),
            (t = n
              .clone()
              .css({ width: `${n[0].offsetWidth}px`, height: "100%" })
              .appendTo("body")),
            (r = t.css("height")),
            t.css("width"),
            t.remove(),
            n.animate({ height: r }, a);
        }),
        r
      );
    }),
      submenuBtn.click(function (a) {
        a.preventDefault(), a.stopPropagation();
        if ($(this.parentElement).hasClass("header__navbar__item__sub-link")) {
          const a = $(this).parent().parent(),
            n = $(
              ".header__navbar__item.open > .header__navbar__item__submenu"
            ),
            t = a.children(".header__navbar__item__submenu");
          a.hasClass("open")
            ? (n.animate({ height: `-=${e}` }, 0, "linear"),
              t.animate({ height: "0" }, 100, "linear"))
            : ((e = t.animateAuto("height", 100)),
              n.animate({ height: `+=${e}` }, 100, "linear")),
            a.toggleClass("open");
        } else {
          const e = jQuery(this.offsetParent),
            a = e.hasClass("open"),
            n = jQuery(this.offsetParent)
              .children(".header__navbar__item__submenu")
              .children(".header__navbar__item")
              .children(".header__navbar__item__submenu");
          a || headerNavbarItems.removeClass("open"),
            e.toggleClass("open"),
            $(".header__navbar__item .header__navbar__item__submenu").animate({
              height: 0,
            }),
            a ||
              $(
                ".header__navbar__item.open > .header__navbar__item__submenu"
              ).animateAuto("height", 100),
            n.css({ height: "0" });
        }
      }),
      submenuFooterBtn.click(function (e) {
        if (window.innerWidth > 768) return;
        const a = $(this).parent(),
          n = a.children(".footer__navbar__list");
        a.toggleClass("open"),
          (a.hasClass("open") && n.animateAuto("height", 300)) ||
            n.animate({ height: "0" });
      });
  })(),
  headerNavbarContainer.click((e) => e.stopPropagation()),
  listMenuHeader.forEach((e) => {
    e.addEventListener("click", () => {
      let a = e.querySelector(".header__user-menu__item__option");
      a.classList.contains("active") ||
        $(".header__user-menu__item__option").removeClass("active"),
        a.classList.toggle("active");
    });
  }),
  elementsUserMenuOptionsList.forEach((e) => {
    e.addEventListener("click", function (e) {
      e.stopPropagation();
    });
  }),
  (() => {
    const e = JSON.parse(localStorage.getItem("user-ttthh-info")) ?? {},
      a = e.email,
      n = $(".login-request"),
      t = $(".sign-out-btn"),
      r = $(".login-link");
    a
      ? (n.addClass("login"),
        $(".header__user-menu__item__options__item__link--name").html(
          `\n            <i class="fas fa-user-circle"></i>\n            Hello ${e["first-name"]} ${e["last-name"]}\n        `
        ))
      : r.attr("href", "./Login.html?href=MyAccount"),
      t.click((e) => {
        localStorage.setItem("user-ttthh-info", JSON.stringify({})),
          (window.location = "/Login.html");
      });
  })();
const scrollToElement = (e, a) =>
  e.scrollIntoView({ behavior: "smooth", block: a });
Array.prototype.hasProduct = function (e) {
  return this.some((a) => a.slug === e.slug);
};

if ($('.header__navbar__modal.open')) {
    $('.header__navbar__modal.open').scroll(e => {
        e.stopPropagation();
    })
}