const sectionElement=document.querySelector("section");let arrDataStorage=JSON.parse(localStorage.getItem("TTTHH-CART-KEY"))??[];const getPriceProduct=n=>n.discount?n.price*(100-n.discount)/100:n.price;sectionElement.innerHTML=`<div class="container">\n<div class="row no-gutters content__box">\n    <div class="col col-xl-8 col-lg-8 col-md-12 col-sm-12 col-12 shopping__cart">\n        <div class="shopping__cart__child">\n            <h1 class="shopping__cart__content">Shopping Cart</h1>\n            ${arrDataStorage.map(n=>`\n                <div class="row no-gutters shopping__cart__child__box">\n                    <div class="col col-xl-2 col-lg-2 col-md-2 col-sm-12 col-12">\n                        <img class="shopping__cart__product-img" src="IMG/${n.image}" alt="${n.name}">\n                    </div>\n                    <div class="col col-xl-4 col-lg-4 col-md-4 col-sm-12 col-12">\n                        <p class="shopping__cart__product-name">${n.name}</p>\n                        <p class="shopping__cart__old"><span class="shopping__cart__old-price ${n.discount||"hidden"}">$${n.price.toFixed(2)}</span>\n                        <span class="shopping__cart__percent-sales ${n.discount||"hidden"}">(-${n.discount}%)</span></p>\n                        <p class="shopping__cart__new-price">$${getPriceProduct(n).toFixed(2)}</p>\n                        <p class="shopping__cart__option">Size: <span class="shopping__cart__size-type">${n.size[0]}</span></p>\n                        <p class="shopping__cart__option">Color: <span class="shopping__cart__color-type">${n.color[0]}</span></p>\n                    </div>\n                    <div class="col col-xl-5 col-lg-5 col-md-5 col-sm-12 col-12">\n                        <div class="row no-gutters align-items-center">\n                            <div class="col col-xl-4 col-lg-4 col-md-4 col-sm-4 col-4">\n                                <div class="box__input-quantity">\n                                    <input type="text" id="shopping__cart__quantity-product" value="${n.number}">\n                                    <div class="group__control__quantity">\n                                        <button class="btn__up__qty"><i class="fa-solid fa-angle-up"></i></button>\n                                        <button class="btn__down__qty"><i class="fa-solid fa-angle-down"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                            <p class="col col-xl-5 col-lg-5 col-md-5 col-sm-5 col-5 shopping__cart__product__price-total">\n                                $${(getPriceProduct(n)*n.number).toFixed(2)}\n                            </p>\n                            <p class="col col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 shopping__cart__remove__product">\n                                <i class="fa-solid fa-trash"></i>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            `).join("")}\n        </div>\n\n        <a class="goto__shopping-btn" href="./index.html">CONTINUE SHOPPING</a>\n        <a class="goto__shopping-btn" href="" id="myBtn" data-toggle="modal" data-target="#myModal">Order</a>\n\n        <div id="myModal" class="modal fade" role="dialog">\n            <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">\n                <div class="modal-content">\n                    <div class="modal-header">\n                        <h1 class="text-center modal-title  font-weight-bold ">Ordering Information</h1>\n                        <button type="button" class="close" data-dismiss="modal">&times;</button>\n                    </div>\n                    <div class="modal-body">\n                        <form action="">\n                            <div class="form-group">\n                                <h2 class="text-center">Delivery Address</h2>\n                                <div id="thongbao" class="text-center text-danger">\n                                </div>\n                            </div>\n                            <div class="form-froup">\n                                <div class="row">\n                                    <div class="col-sm-6">\n                                        <input type="text" name="" id="txtht" class="form-control" required placeholder="Full Name">\n                                        <span id="tbht" class="text-danger">(*)</span>\n                                    </div>\n                                    <div class="col-sm-6">\n                                        <input type="text" name="" id="txtsdt" class="form-control" required placeholder="Number phone">\n                                        <span id="tbsdt" class="text-danger">(*)</span>\n                                    </div>\n                                </div>\n                            </div>\n                            \n                            <div class="form-froup">\n                                <div class="row">\n                                    <div class="col-sm-6">\n                                        <select name="tp" id="txttp" class="col-sm-12 form-control">\n                                        </select>\n                                        <span id="tbtp" class="text-danger">(*)</span>\n                                    </div>\n                                    <div class="col-sm-6">\n                                        <select name="quan" id="txtquan" class="col-sm-12 form-control">\n                                        </select>\n                                        <span id="tbquan" class="text-danger">(*)</span>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class="form-froup">\n                                <input type="text" name="" id="txtDiaChi" class="form-control" required placeholder="14 Nguyen Van Bao Phuong 2">\n                                <span id="tbDiaChi" class="text-danger">(*)</span>\n                            </div>\n\n                            <div class="form-froup">\n                                <textarea class="form-control" name="" id="" cols="215" rows="5" placeholder="Note"></textarea>\n                            </div>\n                            \n                            <div class="form-group">\n                                <h2 class="text-center mt-2">Product Information</h2>\n                            </div>\n\n                            <div class="shopping__cart__child">\n                                <div class="row">\n                                    <div class="col-4">\n                                        <h3 class="text-center">Product name</h3>\n                                    </div>\n                                    <div class="col-4">\n                                        <h3 class="text-center">Quantity</h3>\n                                    </div>\n                                    <div class="col-4" class="">\n                                        <h3>Price</h3>\n                                    </div>\n                                </div>    \n\n                                ${arrDataStorage.map(n=>`\n                                <div class="row no-gutters shopping__cart__child__box">\n                                    <div class="col col-xl-2 col-lg-2 col-md-2 col-sm-12 col-12">\n                                        <img class="shopping__cart__product-img" src="IMG/${n.image}" alt="${n.name}">\n                                    </div>\n                                    <div class="col col-xl-4 col-lg-4 col-md-4 col-sm-12 col-12">\n                                        <p class="shopping__cart__product-name">${n.name}</p>\n                                        \n                                        <p class="shopping__cart__new-price">$${getPriceProduct(n).toFixed(2)}</p>\n                                        <p class="shopping__cart__option">Size: <span class="shopping__cart__size-type">${n.size[0]}</span></p>\n                                        <p class="shopping__cart__option">Color: <span class="shopping__cart__color-type">${n.color[0]}</span></p>\n                                    </div>\n                                    <div class="col col-xl-5 col-lg-5 col-md-5 col-sm-12 col-12">\n                                        <div class="row no-gutters">\n                                            <div class="col col-xl-4 col-lg-4 col-md-4 col-sm-4 col-4">\n                                                <div class="box__input-quantity">\n                                                    <p class="col col-xl-5 col-lg-5 col-md-5 col-sm-5 col-5 shopping__cart__product__price-total">\n                                                        ${n.number}\n                                                    </p>\n                                                </div>\n                                            </div>\n                                            <p class="col col-xl-5 col-lg-5 col-md-5 col-sm-5 col-5 shopping__cart__product__price-total">\n                                                $${(getPriceProduct(n)*n.number).toFixed(2)}\n                                            </p>\n                                        </div>\n                                    </div>\n                                </div>`).join("")}\n\n                            </div>\n                            <div class="form-group">\n                                <h1 class="text-right mt-3">Total (tax excl.): $${arrDataStorage.reduce((n,t)=>n+getPriceProduct(t)*t.number,0).toFixed(2)}</h1>\n                                \n                            </div>\n                            <button type="button" id="btnSave" class="btn btn-outline-success btn-lg btn-block">Order</button>\n                        </form>\n                    </div>\n                    <div class="modal-footer">\n                        <button type="button" class="btn btn-default btn-outline-dark" data-dismiss="modal">Close</button> \n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="col col-xl-4 col-lg-4 col-md-12 col-sm-12 col-12 infomation__detail">\n        <div>\n            <div class="infomation__detail__box infomation__detail__subtotal">\n                <div class="group__need__border-bottom">\n                    <div class="group__need_border-bottom__flex">\n                        <span class="infomation__detail__quantity-total">${arrDataStorage.reduce((n,t)=>n+t.number,0)} items</span>\n                        <span class="infomation__detail__money-total">$${arrDataStorage.reduce((n,t)=>n+getPriceProduct(t)*t.number,0).toFixed(2)}</span>\n                    </div>\n                    <div class="group__need_border-bottom__flex">\n                        <span>Shipping</span> \n                        <span class="infomation__detail__shipping-price">$0.00</span>\n                    </div>\n                </div>\n                <div class="group__need__border-bottom">\n                    <div class="group__need_border-bottom__flex">\n                        <span>Total (tax excl.)</span> \n                        <span class="infomation__detail__money-total__andTax">$${arrDataStorage.reduce((n,t)=>n+getPriceProduct(t)*t.number,0).toFixed(2)}</span>\n                    </div>\n                    <div class="group__need_border-bottom__flex">\n                        <span>Taxes</span> \n                    <span class="infomation__detail__tax">$${(0).toFixed(2)}</span>\n                    </div>  \n                </div>\n                <div class="group__need_padding goto__checkout__box">\n                    <a  class="goto__checkout" href="#">PROCEED TO CHECKOUT</a>\n                </div>\n            </div>\n            <div class="infomation__detail__box infomation__detail__box__policy">\n                <ul class="infomation__detail__list__policy">\n                    <li class="group__need__border-bottom infomation__detail__item__policy">\n                        <i class="icofont-shield"></i>\n                        <span> Security policy (edit with Customer reassurance module)</span>\n                    </li>\n                    <li class="group__need__border-bottom infomation__detail__item__policy">\n                        <i class="icofont-truck-alt"></i>\n                        <span>Delivery policy (edit with Customer reassurance module)</span>\n                    </li>\n                    <li class="group__need_padding infomation__detail__item__policy">\n                        <i class="icofont-exchange"></i>\n                        <span>Return policy (edit with Customer reassurance module)</span>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n\n</div>\n</div>`;const arrBtnUpQty=document.querySelectorAll(".btn__up__qty"),arrBtnDownQty=document.querySelectorAll(".btn__down__qty");function getParentElement(n,t){for(;!n.classList.contains(t);)n=n.parentElement;return n}function handleUpDownQty(n,t){let o=getParentElement(n,"shopping__cart__child__box"),a=o.querySelector("#shopping__cart__quantity-product");if(a.value-0<="1"&&-1==t)return;a.value=a.value-0+t;let e=o.querySelector(".shopping__cart__product-name").textContent,i=o.querySelector(".shopping__cart__product__price-total");arrDataStorage.forEach((n,t)=>{n.name===e&&(n.number=a.value-0,i.innerHTML=`$${(getPriceProduct(n)*n.number).toFixed(2)}`)}),localStorage.setItem("TTTHH-CART-KEY",JSON.stringify(arrDataStorage)),re_render_detailProduct()}function re_render_detailProduct(){document.querySelector(".infomation__detail").innerHTML=`<div>\n    <div class="infomation__detail__box infomation__detail__subtotal">\n        <div class="group__need__border-bottom">\n            <div class="group__need_border-bottom__flex">\n                <span class="infomation__detail__quantity-total">${arrDataStorage.reduce((n,t)=>n+t.number,0)} items</span>\n                <span class="infomation__detail__money-total">$${arrDataStorage.reduce((n,t)=>n+getPriceProduct(t)*t.number,0).toFixed(2)}</span>\n            </div>\n            <div class="group__need_border-bottom__flex">\n                <span>Shipping</span> \n                <span class="infomation__detail__shipping-price">$0.00</span>\n            </div>\n        </div>\n        <div class="group__need__border-bottom">\n            <div class="group__need_border-bottom__flex">\n                <span>Total (tax excl.)</span> \n                <span class="infomation__detail__money-total__andTax">$${arrDataStorage.reduce((n,t)=>n+getPriceProduct(t)*t.number,0).toFixed(2)}</span>\n            </div>\n            <div class="group__need_border-bottom__flex">\n                <span>Taxes</span> \n            <span class="infomation__detail__tax">$${(0).toFixed(2)}</span>\n            </div>  \n        </div>\n        <div class="group__need_padding goto__checkout__box">\n            <a  class="goto__checkout" href="#">PROCEED TO CHECKOUT</a>\n        </div>\n    </div>\n    <div class="infomation__detail__box infomation__detail__box__policy">\n        <ul class="infomation__detail__list__policy">\n            <li class="group__need__border-bottom infomation__detail__item__policy">\n                <i class="icofont-shield"></i>\n                <span> Security policy (edit with Customer reassurance module)</span>\n            </li>\n            <li class="group__need__border-bottom infomation__detail__item__policy">\n                <i class="icofont-truck-alt"></i>\n                <span>Delivery policy (edit with Customer reassurance module)</span>\n            </li>\n            <li class="group__need_padding infomation__detail__item__policy">\n                <i class="icofont-exchange"></i>\n                <span>Return policy (edit with Customer reassurance module)</span>\n            </li>\n        </ul>\n    </div>\n</div>`}arrBtnUpQty.forEach((n,t)=>{n.addEventListener("click",()=>handleUpDownQty(n,1))}),arrBtnDownQty.forEach((n,t)=>{n.addEventListener("click",()=>handleUpDownQty(n,-1))});const arrBtnRemoveProduct=Array.from(document.querySelectorAll(".shopping__cart__remove__product")),arrInputQty=Array.from(document.querySelectorAll(".box__input-quantity > input"));arrBtnRemoveProduct.forEach(function(n){n.addEventListener("click",function(){let t=getParentElement(n,"shopping__cart__child__box"),o=t.querySelector(".shopping__cart__product-name").textContent;arrDataStorage.forEach((n,t)=>{n.name===o&&arrDataStorage.splice(t,1)}),t.remove(),re_render_detailProduct(),localStorage.setItem("TTTHH-CART-KEY",JSON.stringify(arrDataStorage))})}),arrInputQty.forEach((n,t)=>{n.addEventListener("blur",()=>{let t=getParentElement(n,"shopping__cart__child__box"),o=t.querySelector(".shopping__cart__product-name").textContent,a=t.querySelector(".shopping__cart__product__price-total");(isNaN(n.value)||n.value-0<=0)&&(n.value=1),arrDataStorage.forEach(t=>{t.name===o&&(t.number=n.value-0,a.innerHTML=`$${(getPriceProduct(t)*t.number).toFixed(2)}`)}),re_render_detailProduct(),localStorage.setItem("TTTHH-CART-KEY",JSON.stringify(arrDataStorage))})}),$(document).ready(function(){$("#myModal").on("hidden.bs.modal",function(){location.reload()});const n=["Hồ Chí Minh","Hà Nội"],t=["Quận Bình Tân","Quận Bình Thạnh","Quận Gò Vấp","Quận Phú Nhuận","Quận Tân Bình","Quận Tân Phú","Quận Thủ Đức","Huyện Bình Chánh","Huyện Cần Giờ","Huyện Củ Chi","Huyện Hóc Môn","Huyện Nhà Bè"];for(let n=1;n<13;n++)t.push("Quận "+n);t.sort();const o=["Quận Hoàn Kiếm","Quận Ba Đình","Quận Hai Bà Trưng","Quận Tây Hồ","Quận Đống Đa","Quận Cầu Giấy","Quận Long Biên","Quận Hoàng Mai","Quận Hà Đông","Quận Thanh Xuân","Quận Bắc Từ Liêm","Quận Nam Từ Liêm"];o.sort();let a="<option value=''selected>City</option>";for(let t=0;t<n.length;t++)a+='<option value="'+n[t]+'">'+n[t]+"</option>";function e(){var n=$("#txtht").val();return""==n.trim()?($("#tbht").html("*Bắt buộc nhập"),!1):/^[A-Z][a-zA-Z]{1,}(?: [A-Z][a-zA-Z]*){0,2}$/.test(n)?($("#tbht").html("(*)"),!0):($("#tbht").html("*Viết hoa chữ cái đầu tiên của từ chữ và mỗi từ 2 kí tự trở lên"),!1)}function i(){var n=$("#txtsdt").val();return""==n.trim()?($("#tbsdt").html("(*)Bắt buộc nhập"),!1):/^((0[3|5|7|8|9])+([0-9]{8})|(\+84)+\d{9})$/.test(n)?($("#tbsdt").html("(*)"),!0):($("#tbsdt").html("(*)Bắt đầu từ +84 hoặc 03, 05, 07, 08, 09 và phải đủ 10 số"),!1)}function l(){var n=$("#txtDiaChi").val();return""==n.trim()?($("#tbDiaChi").html("(*)Bắt buộc nhập"),!1):/^\d+\s[A-z]+\s[A-z]+/.test(n)?($("#tbDiaChi").html("(*)"),!0):($("#tbDiaChi").html("Số nhà tên đường xã"),!1)}function s(){return""==$("#txttp").val()?($("#tbtp").html("(*)Bắt buộc chọn"),!1):($("#tbtp").html("(*)"),!0)}function c(){var n=$("#txtquan").val(),a=$("#txttp").val(),e="";if($("#txtquan").html(e),""==n)return $("#tbquan").html("(*)Bắt buộc chọn"),!1;if("Hồ Chí Minh"==a)for(let n=0;n<t.length;n++)e+='<option value="'+t[n]+'">'+t[n]+"</option>";if("Hà Nội"==a)for(let n=0;n<o.length;n++)e+='<option value="'+o[n]+'">'+o[n]+"</option>";return $("#txtquan").html(e),$("#tbquan").html("(*)"),!0}$("#txttp").html(a),$("#txtht").blur(e),$("#txtsdt").blur(i),$("#txtDiaChi").blur(l),$("#txttp").click(s),$("#txttp").change(c),$("#btnSave").click(function(){return 0==arrDataStorage.length?(toast({title:"Thiếu dữ liệu",message:"Giỏ hàng rỗng",type:"warning",duration:5e3}),!1):0==e()||0==i()||0==l()||0==s()||0==c()?(toast({title:"Thiếu dữ liệu",message:"Mời bạn nhập đúng và đầy đủ thông tin",type:"warning",duration:5e3}),!1):($("#myModal").modal("hide"),toast({title:"Thành công",message:"Order Successfully",type:"success",duration:5e3}),localStorage.removeItem("TTTHH-CART-KEY"),!0)})});