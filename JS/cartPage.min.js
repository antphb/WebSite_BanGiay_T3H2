const sectionElement=document.querySelector("section");let arrDataStorage=JSON.parse(localStorage.getItem("TTTHH-CART-KEY"))??[];console.log(arrDataStorage);const getPriceProduct=n=>n.discount?n.price*(100-n.discount)/100:n.price;sectionElement.innerHTML=`<div class="container">\n<div class="row no-gutters content__box">\n    <div class="col col-xl-8 col-lg-8 col-md-12 col-sm-12 col-12 shopping__cart">\n        <div class="shopping__cart__child">\n            <h1 class="shopping__cart__content">Shopping Cart</h1>\n            ${arrDataStorage.map(((n,t)=>`\n            <div class="row no-gutters shopping__cart__child__box">\n                <div class="col col-xl-2 col-lg-2 col-md-2 col-sm-12 col-12">\n                    <img class="shopping__cart__product-img" src="IMG/${n.image}" alt="${n.name}">\n                </div>\n                <div class="col col-xl-4 col-lg-4 col-md-4 col-sm-12 col-12">\n                    <p class="shopping__cart__product-name">${n.name}</p>\n                    <p class="shopping__cart__old"><span class="shopping__cart__old-price ${n.discount||"hidden"}">$${n.price.toFixed(2)}</span>\n                    <span class="shopping__cart__percent-sales ${n.discount||"hidden"}">(-${n.discount}%)</span></p>\n                    <p class="shopping__cart__new-price">$${getPriceProduct(n).toFixed(2)}</p>\n                    <p class="shopping__cart__option">Size: <span class="shopping__cart__size-type">${n.size[0]}</span></p>\n                    <p class="shopping__cart__option">Color: <span class="shopping__cart__color-type">${n.color[0]}</span></p>\n                </div>\n                <div class="col col-xl-5 col-lg-5 col-md-5 col-sm-12 col-12">\n                    <div class="row no-gutters">\n                        <div class="col col-xl-4 col-lg-4 col-md-4 col-sm-4 col-4">\n                            <div class="box__input-quantity">\n                                <input type="text" id="shopping__cart__quantity-product" value="${n.number}">\n                                <div class="group__control__quantity">\n                                    <button class="btn__up__qty"><i class="fa-solid fa-angle-up"></i></button>\n                                    <button class="btn__down__qty"><i class="fa-solid fa-angle-down"></i></button>\n                                </div>\n                            </div>\n                        </div>\n                        <p class="col col-xl-5 col-lg-5 col-md-5 col-sm-5 col-5 shopping__cart__product__price-total">\n                            $${(getPriceProduct(n)*n.number).toFixed(2)}\n                        </p>\n                        <p class="col col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3 shopping__cart__remove__product">\n                            <i class="fa-solid fa-trash"></i>\n                        </p>\n                    </div>\n                </div>\n            </div>`)).join("")}\n            \n            \n        </div>\n        <a class="goto__shopping-btn" href="./index.html">CONTINUE SHOPPING</a>\n    </div>\n    <div class="col col-xl-4 col-lg-4 col-md-12 col-sm-12 col-12 infomation__detail">\n        <div>\n            <div class="infomation__detail__box infomation__detail__subtotal">\n                <div class="group__need__border-bottom">\n                    <div class="group__need_border-bottom__flex">\n                        <span class="infomation__detail__quantity-total">${arrDataStorage.reduce(((n,t)=>n+t.number),0)} items</span>\n                        <span class="infomation__detail__money-total">$${arrDataStorage.reduce(((n,t)=>n+getPriceProduct(t)*t.number),0).toFixed(2)}</span>\n                    </div>\n                    <div class="group__need_border-bottom__flex">\n                        <span>Shipping</span> \n                        <span class="infomation__detail__shipping-price">$0.00</span>\n                    </div>\n                </div>\n                <div class="group__need__border-bottom">\n                    <div class="group__need_border-bottom__flex">\n                        <span>Total (tax excl.)</span> \n                        <span class="infomation__detail__money-total__andTax">$${arrDataStorage.reduce(((n,t)=>n+getPriceProduct(t)*t.number),0).toFixed(2)}</span>\n                    </div>\n                    <div class="group__need_border-bottom__flex">\n                        <span>Taxes</span> \n                    <span class="infomation__detail__tax">$${(0).toFixed(2)}</span>\n                    </div>  \n                </div>\n                <div class="group__need_padding goto__checkout__box">\n                    <a  class="goto__checkout" href="#">PROCEED TO CHECKOUT</a>\n                </div>\n            </div>\n            <div class="infomation__detail__box infomation__detail__box__policy">\n                <ul class="infomation__detail__list__policy">\n                    <li class="group__need__border-bottom infomation__detail__item__policy">\n                        <i class="icofont-shield"></i>\n                        <span> Security policy (edit with Customer reassurance module)</span>\n                    </li>\n                    <li class="group__need__border-bottom infomation__detail__item__policy">\n                        <i class="icofont-truck-alt"></i>\n                        <span>Delivery policy (edit with Customer reassurance module)</span>\n                    </li>\n                    <li class="group__need_padding infomation__detail__item__policy">\n                        <i class="icofont-exchange"></i>\n                        <span>Return policy (edit with Customer reassurance module)</span>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n\n</div>\n</div>`;const arrBtnUpQty=document.querySelectorAll(".btn__up__qty"),arrBtnDownQty=document.querySelectorAll(".btn__down__qty");function getParentElement(n,t){for(;!n.classList.contains(t);)n=n.parentElement;return n}function handleUpDownQty(n,t){let o=getParentElement(n,"shopping__cart__child__box"),e=o.querySelector("#shopping__cart__quantity-product");if(e.value-0<="1"&&-1==t)return;e.value=e.value-0+t;let a=o.querySelector(".shopping__cart__product-name").textContent,_=o.querySelector(".shopping__cart__product__price-total");arrDataStorage.forEach(((n,t)=>{n.name===a&&(n.number=e.value-0,_.innerHTML=`$${(getPriceProduct(n)*n.number).toFixed(2)}`)})),localStorage.setItem("TTTHH-CART-KEY",JSON.stringify(arrDataStorage)),re_render_detailProduct()}function re_render_detailProduct(){document.querySelector(".infomation__detail").innerHTML=`<div>\n    <div class="infomation__detail__box infomation__detail__subtotal">\n        <div class="group__need__border-bottom">\n            <div class="group__need_border-bottom__flex">\n                <span class="infomation__detail__quantity-total">${arrDataStorage.reduce(((n,t)=>n+t.number),0)} items</span>\n                <span class="infomation__detail__money-total">$${arrDataStorage.reduce(((n,t)=>n+getPriceProduct(t)*t.number),0).toFixed(2)}</span>\n            </div>\n            <div class="group__need_border-bottom__flex">\n                <span>Shipping</span> \n                <span class="infomation__detail__shipping-price">$0.00</span>\n            </div>\n           \n        </div>\n        <div class="group__need__border-bottom">\n            <div class="group__need_border-bottom__flex">\n                <span>Total (tax excl.)</span> \n                <span class="infomation__detail__money-total__andTax">$${arrDataStorage.reduce(((n,t)=>n+getPriceProduct(t)*t.number),0).toFixed(2)}</span>\n            </div>\n            <div class="group__need_border-bottom__flex">\n                <span>Taxes</span> \n            <span class="infomation__detail__tax">$${(0).toFixed(2)}</span>\n            </div>  \n        </div>\n        <div class="group__need_padding goto__checkout__box">\n            <a  class="goto__checkout" href="#">PROCEED TO CHECKOUT</a>\n        </div>\n    </div>\n    <div class="infomation__detail__box infomation__detail__box__policy">\n        <ul class="infomation__detail__list__policy">\n            <li class="group__need__border-bottom infomation__detail__item__policy">\n                <i class="icofont-shield"></i>\n                <span> Security policy (edit with Customer reassurance module)</span>\n            </li>\n            <li class="group__need__border-bottom infomation__detail__item__policy">\n                <i class="icofont-truck-alt"></i>\n                <span>Delivery policy (edit with Customer reassurance module)</span>\n            </li>\n            <li class="group__need_padding infomation__detail__item__policy">\n                <i class="icofont-exchange"></i>\n                <span>Return policy (edit with Customer reassurance module)</span>\n            </li>\n        </ul>\n    </div>\n</div>`}arrBtnUpQty.forEach(((n,t)=>{n.addEventListener("click",(()=>{handleUpDownQty(n,1)}))})),arrBtnDownQty.forEach(((n,t)=>{n.addEventListener("click",(()=>{handleUpDownQty(n,-1)}))}));const arrBtnRemoveProduct=Array.from(document.querySelectorAll(".shopping__cart__remove__product")),arrInputQty=Array.from(document.querySelectorAll(".box__input-quantity > input"));arrBtnRemoveProduct.forEach((function(n){n.addEventListener("click",(function(){let t=getParentElement(n,"shopping__cart__child__box"),o=t.querySelector(".shopping__cart__product-name").textContent;arrDataStorage.forEach(((n,t)=>{n.name===o&&arrDataStorage.splice(t,1)})),t.remove(),re_render_detailProduct(),localStorage.setItem("TTTHH-CART-KEY",JSON.stringify(arrDataStorage))}))})),arrInputQty.forEach(((n,t)=>{n.addEventListener("blur",(()=>{let t=getParentElement(n,"shopping__cart__child__box"),o=t.querySelector(".shopping__cart__product-name").textContent,e=t.querySelector(".shopping__cart__product__price-total");(isNaN(n.value)||n.value-0<=0)&&(n.value=1),arrDataStorage.forEach((t=>{t.name===o&&(t.number=n.value-0,e.innerHTML=`$${(getPriceProduct(t)*t.number).toFixed(2)}`)})),re_render_detailProduct(),localStorage.setItem("TTTHH-CART-KEY",JSON.stringify(arrDataStorage))}))}));